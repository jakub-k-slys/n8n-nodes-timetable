# Repository Guidelines

## Project Structure & Module Organization
- `nodes/`: TypeScript source for n8n nodes (e.g., `nodes/Timetable/TimetableTrigger.node.ts`, helpers, and `*.json` descriptions). Icons live alongside sources (`*.svg`, `*.png`).
- `credentials/`: Credential classes (e.g., `TimetableTrigger.credentials.ts`).
- `tests/`: Unit tests in `tests/unit/**/*.test.ts`.
- `dist/`: Build output generated by TypeScript and gulp; do not edit by hand.
- Root configs: `tsconfig.json`, `eslint.config.js`, `.prettierrc.js`, `jest.config.js`, `gulpfile.js`.

## Build, Test, and Development Commands
- `npm run dev`: Compile TypeScript in watch mode.
- `npm run build`: Clean `dist`, compile TypeScript, then copy icons via gulp.
- `npm test` / `npm run test:watch`: Run Jest tests (Node env, ts-jest).
- `npm run lint` / `npm run lintfix`: Lint (and auto-fix) nodes and `package.json` with `eslint-plugin-n8n-nodes-base`.
- `npm run format`: Format sources with Prettier.
- Node version: `>=20.15`. Peer: `n8n-workflow@^1.82.0`.

## Coding Style & Naming Conventions
- Language: TypeScript (strict). Keep logic in helpers (e.g., `GenericFunctions.ts`, `LoggingHelpers.ts`).
- Prettier: tabs (width 2), single quotes, semicolons, trailing commas, line width 100, LF endings.
- Node files: `PascalCase` and end with `.node.ts` (e.g., `TimetableTrigger.node.ts`). Folder `nodes/<Feature>/`. Icons must be SVG/PNG.
- Follow `eslint-plugin-n8n-nodes-base` rules; fix violations before pushing.

## Testing Guidelines
- Framework: Jest with `ts-jest` preset. Tests live in `tests/unit/` and match `**/*.test.ts` (e.g., `TimetableTrigger.test.ts`).
- Coverage is collected from `nodes/**/*.ts` and `credentials/**/*.ts`. Add focused tests for edge cases (timezones, cron expressions, manual triggers).
- Run `npm test` locally; use `--watch` during development.

## Commit & Pull Request Guidelines
- Commit style: conventional, imperative, small scope (e.g., `fix: update crontab expression`, `refactor: extract logging helper`).
- PRs: include a clear description, linked issues, screenshots if UI-facing (icons/descriptions), and test coverage for new behavior. Ensure `npm run build`, `lint`, and `test` pass.

## Security & Publishing Tips
- Do not commit secrets or `dist/`. Publishing uses `prepublishOnly` to build and lint; run it locally before release: `npm run prepublishOnly`.
